
	<!--
		TestProcess BPEL Process [Generated by the Eclipse BPEL Designer]
	-->
<bpel:process name="TestProcess"
	targetNamespace="http://decidr.de/DefaultTenant/processes/302"
	xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
	xmlns:ws1="http://decidr.de/webservices/Email" xmlns:ws2="http://decidr.de/webservices/HumanTask"
	xmlns:basic="http://decidr.de/wsdl/basicProcess" xmlns:ode="http://www.apache.org/ode/type/extension"
	xmlns:decidr="http://decidr.de/schema/DecidrTypes" xmlns:pdecidr="http://decidr.de/schema/DecidrProcessTypes"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:hut="http://decidr.de/schema/humanTask"
	xmlns:tns="http://decidr.de/DefaultTenant/processes/302" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable">

	<!-- Import the client WSDL -->
	<bpel:import namespace="http://decidr.de/wsdl/basicProcess"
		location="odeprocess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
	<bpel:import namespace="http://decidr.de/webservices/HumanTask"
		location="HumanTask.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
	<bpel:import location="TestProcessArtifacts.wsdl"
		namespace="http://decidr.de/DefaultTenant/processes/302" importType="http://schemas.xmlsoap.org/wsdl/" />

	<!--
		=================================================================
	-->
	<!--
		PARTNERLINKS
	-->
	<!--
		List of services participating in this BPEL process
	-->
	<!--
		=================================================================
	-->
	<bpel:partnerLinks>
		<!-- The 'client' role represents the requester of this service. -->
		<bpel:partnerLink name="client" partnerLinkType="tns:ProcessPLT"
			myRole="HumanTaskTestProvider" />
		<bpel:partnerLink name="HumanTaskService"
			partnerLinkType="ws2:HumanTaskPLT" myRole="HumanTaskClient"
			partnerRole="HumanTaskProvider"></bpel:partnerLink>
	</bpel:partnerLinks>

	<!--
		=================================================================
	-->
	<!--
		VARIABLES
	-->
	<!--
		List of messages and XML documents used within this BPEL process
	-->
	<!--
		=================================================================
	-->
	<variables>
		<!-- BPEL process variables -->
		<variable name="processIn" messageType="tns:startMessageRequest" />
		<variable name="processOut" messageType="tns:startMessageResponse" />
		<variable name="wfmid" type="xsd:long" />
		<variable name="createTaskIn" messageType="ws2:createTaskRequest" />
		<variable name="createTaskOut" messageType="ws2:createTaskResponse" />

		<variable name="L1260445451575" type="xsd:string" />
		<variable name="L1260445559543" type="xsd:string" />
		<variable name="L1260455349758" type="xsd:string" />

		<variable name="L1260455400647" type="xsd:string" />
		<variable name="L1260455508986" type="xsd:string" />

		<variable name="L1260445287013" element="decidr:role" />
		<variable name="L1260445515504" element="decidr:role" />
		<bpel:variable name="L1260455377884" messageType="basic:taskCompletedRequest"></bpel:variable>
		<bpel:variable name="HumanTaskServiceResponse"
			messageType="basic:taskCompletedResponse"></bpel:variable>
		<bpel:variable name="clientRequest" messageType="tns:runProcessRequest"></bpel:variable>
		<bpel:variable name="clientResponse" messageType="tns:runProcessResponse"></bpel:variable>
	</variables>

	<!--
		=================================================================
	-->
	<!--
		ORCHESTRATION LOGIC
	-->
	<!--
		Set of activities coordinating the flow of messages across the
	-->
	<!--
		services integrated within this business process
	-->
	<!--
		=================================================================
	-->
	<bpel:correlationSets>
		<bpel:correlationSet name="taskCorrelation"
			properties="tns:taskID"></bpel:correlationSet>
		<bpel:correlationSet name="pidCorrelation"
			properties="tns:odePID"></bpel:correlationSet>
	</bpel:correlationSets>
	<bpel:sequence name="main">

		<!--
			Receive input from requester. Note: This maps to operation defined in
			TestProcess.wsdl
		-->
		<bpel:receive name="Prepare" partnerLink="client"
			createInstance="yes" operation="startProcess" portType="tns:HumanTaskTestPT"
			variable="processIn" />

		<!-- Generate reply to synchronous request -->
		<bpel:assign validate="no" name="Assign">
			<bpel:copy>
				<bpel:from>
					<bpel:literal xml:space="preserve"><tns:startProcessResponse xmlns:tns="http://decidr.de/DefaultTenant/processes/302" xmlns:tns1="http://decidr.de/schema/DecidrTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:pid></tns:pid>
</tns:startProcessResponse></bpel:literal>
				</bpel:from>
				<bpel:to variable="processOut" part="payload"></bpel:to>
			</bpel:copy>
			<bpel:copy>
				<bpel:from>
                    <![CDATA[$ode:pid]]>
				</bpel:from>
				<bpel:to part="payload" variable="processOut">
					<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:pid]]></bpel:query>
				</bpel:to>
			</bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <bpel:literal xml:space="preserve"><tns:runProcessResponse xmlns:tns="http://decidr.de/DefaultTenant/processes/302" xmlns:tns1="http://decidr.de/schema/DecidrTypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></tns:runProcessResponse></bpel:literal>
                </bpel:from>
                <bpel:to variable="clientResponse" part="payload"></bpel:to>
            </bpel:copy>
        </bpel:assign>
		<assign name="initVariables">
			<copy>
				<from>
					<literal>This fault message is created by the fault handler of
						the
						corresponding BPEL process</literal>
				</from>
				<to variable="L1260445451575" />
			</copy>
			<copy>
				<from>
					<literal>BPEL process successfully completed.</literal>
				</from>
				<to variable="L1260445559543" />
			</copy>
			<copy>
				<from>
					<literal>doIT</literal>
				</from>
				<to variable="L1260455349758" />
			</copy>
			<copy>
				<from>
					<literal>This is a simple human task</literal>
				</from>
				<to variable="L1260455400647" />
			</copy>
			<!--
				assign configuration variables <copy> <bpel:from part="payload"
				variable="processIn"> <bpel:query
				queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:role]]></bpel:query>
				</bpel:from> <to variable="L1260445515504"/> </copy>
			-->

		</assign>
		<assign name="initRoles">
			<copy>
				<from>
					<literal>
						<basic:role name="L1260445287013">
							<basic:actor userId="1" />
						</basic:role>
					</literal>
				</from>
				<to variable="L1260445287013" />
			</copy>
		</assign>
		<bpel:reply name="Respond to prepare" partnerLink="client"
			portType="tns:HumanTaskTestPT" operation="startProcess" variable="processOut" >
            <bpel:correlations>
                <bpel:correlation set="pidCorrelation" initiate="yes"></bpel:correlation>
            </bpel:correlations>
        </bpel:reply>
		<bpel:receive name='Wait for "go"' partnerLink="client"
			operation="runProcess" portType="tns:HumanTaskTestPT" variable="clientRequest">
            <bpel:correlations>
                <bpel:correlation set="pidCorrelation" initiate="no"></bpel:correlation>
            </bpel:correlations>
        </bpel:receive>
		<bpel:reply name='Respond to "go"' partnerLink="client"
			operation="runProcess" portType="tns:HumanTaskTestPT" variable="clientResponse"></bpel:reply>
		<bpel:sequence name="Sequence">
			<bpel:assign validate="no" name="Assign1">



				<bpel:copy>
					<bpel:from>
						<bpel:literal xml:space="preserve"><hum:createTask
							xmlns="" xmlns:hum="http://decidr.de/webservices/HumanTask"
							xmlns:hum1="http://decidr.de/schema/humanTask">
         <wfmID>?</wfmID>
         <processID>?</processID>
         <userID>?</userID>
         <taskName>?</taskName>
         <!--Optional:-->
         <userNotification>false</userNotification>
         <description>?</description>
         <!--Optional:-->
         <taskData>
           
            <hum1:taskItem name="?" type="?" variable="?">
               <hum1:label>?</hum1:label>
               <!--Optional:-->
               <hum1:hint>?</hum1:hint>
               <!--Optional:-->
               <hum1:value>?</hum1:value>
            </hum1:taskItem>

         </taskData>
      </hum:createTask></bpel:literal>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn"></bpel:to>






				</bpel:copy>
				<bpel:copy>
					<bpel:from part="payload" variable="processIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:role/decidr:actor/@userid]]></bpel:query>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[userID]]>
						</bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from>
						<bpel:literal xml:space="preserve">302</bpel:literal>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[wfmID]]>
						</bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from>

						<bpel:literal xml:space="preserve">d0d1bnklautmjhpfvkf3jnutvljv5q2stbimhlbvcijk26c3mk3ug88g4re6bkaa</bpel:literal>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[processID]]>
						</bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from variable="L1260455349758"></bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[taskName]]></bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from>
                        <![CDATA[false()]]>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[userNotification]]></bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from variable="L1260455400647"></bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[description]]>
						</bpel:query>
					</bpel:to>

				</bpel:copy>
				<bpel:copy>
					<bpel:from>
						<bpel:literal xml:space="preserve"><hut:humanTaskData
							xmlns:hut="http://decidr.de/schema/humanTask">
								<hut:taskItem name="taskItem" type="string">
									<hut:label>Food</hut:label>
									<hut:hint>What is your favorite food?</hut:hint>
									<hut:value></hut:value>
								</hut:taskItem>
							</hut:humanTaskData></bpel:literal>
					</bpel:from>
					<bpel:to part="parameters" variable="createTaskIn">
						<bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[taskData]]></bpel:query>
					</bpel:to>

				</bpel:copy>
			</bpel:assign>
			<bpel:invoke name="Invoke" partnerLink="HumanTaskService"
				operation="createTask" portType="ws2:HumanTaskPT" inputVariable="createTaskIn"
				outputVariable="createTaskOut">
				<bpel:correlations>
					<bpel:correlation set="taskCorrelation" initiate="yes"
						pattern="in"></bpel:correlation>
				</bpel:correlations>
			</bpel:invoke>
			<bpel:receive name="Receive" partnerLink="HumanTaskService"
				operation="taskCompleted" variable="L1260455377884">
				<bpel:correlations>
					<bpel:correlation set="taskCorrelation" initiate="no"></bpel:correlation>
				</bpel:correlations>
			</bpel:receive>


			<bpel:assign validate="no" name="Assign2">
				<bpel:copy>
					<bpel:from>
						<bpel:literal xml:space="preserve"><tns:taskCompletedResponse
							xmlns:tns="http://decidr.de/wsdl/basicProcess" xmlns:tns1="http://decidr.de/schema/DecidrTypes"
							xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
</tns:taskCompletedResponse>
</bpel:literal>
					</bpel:from>
					<bpel:to variable="HumanTaskServiceResponse" part="parameters"></bpel:to>
				</bpel:copy>

			</bpel:assign>
			<bpel:reply name="Reply" partnerLink="HumanTaskService"
				operation="taskCompleted" variable="HumanTaskServiceResponse"></bpel:reply>
		</bpel:sequence>
	</bpel:sequence>
</bpel:process>

