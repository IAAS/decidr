<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workflow xmlns="http://decidr.de/schema/dwdl" targetNamespace="http://decidr.de/tenantName/processes/NCName"
	id="120" name="Party Organization">
	<description>
		Workflow to organize a party!
                </description>
	<variables>
		<variable configurationVariable="yes" type="date" name="ID1" />
		<variable configurationVariable="yes" type="string" name="ID2" />
		<variable type="string" name="ID3">
			<initialValue>
				Party organization successfully finished!
			</initialValue>
		</variable>
		<variable type="form" name="ID4" />
	</variables>
	<roles>
		<role configurationVariable="yes" name="ID5" />
		<role name="ID7">
			<actor email="vip1@example.com" name="VIP1-Guest" userId="123456789" />
			<actor email="vip2@example.com" name="VIP2-Guest" userId="123456790" />
		</role>
		<actor email="host@example.com" name="ID9" userId="1234567891" />
	</roles>
	<faultHandler>
		<setProperty variable="ID2" name="message" />
		<recipient>
			<setProperty name="name">
				<propertyValue>
					Boss
                        </propertyValue>
			</setProperty>
			<setProperty name="email">
				<propertyValue>
					boss@example.com
                        </propertyValue>
			</setProperty>
		</recipient>
	</faultHandler>
	<nodes>
		<startNode id="1">
			<graphics height="20" width="30" y="0" x="0" />
			<sources>
				<source arcId="0" />
			</sources>
		</startNode>
		<invokeNode activity="Decidr-Email" id="2">
			<description>
				Sends all guest an invitation
                                </description>
			<graphics height="20" width="30" y="0" x="0" />
			<targets>
				<target arcId="123456789" />
			</targets>
			<sources>
				<source arcId="123456790" />
			</sources>
			<setProperty variable="ID5" name="to" />
			<setProperty variable="ID9" name="cc" />
			<setProperty name="subject">
				<propertyValue>
					Party invitation
                                        </propertyValue>
			</setProperty>
			<setProperty name="message">
				<propertyValue>
					Dear friend, i would like to invite you to my party.
					You soon will be prompted to fill out a form.
					Regards,
					Mr. X
				</propertyValue>
			</setProperty>
		</invokeNode>
		<forEachNode parallel="yes" counterName="g" id="3">
			<graphics height="20" width="30" y="0" x="0" />
			<targets>
				<target arcId="123456790" />
			</targets>
			<sources>
				<source arcId="123456791" />
			</sources>
			<startCounterValue>
				1
                                </startCounterValue>
			<finalCounterValue>
				$ID5
                                </finalCounterValue>
			<completionCondition>
				AND
                                </completionCondition>
			<nodes>
				<invokeNode activity="Decidr-HumanTask" id="4">
					<description>
						Task to figure out who will attend the party
						and what
						he is going to bring.
                                                </description>
					<graphics height="20" width="30" y="0" x="0" />
					<setProperty name="wfmID">
						<propertyValue>
							jf54sdfasdfsdfeopei4
                       </propertyValue>
					</setProperty>
					<setProperty name="user">
						<propertyValue>
							$g
                                                        </propertyValue>
					</setProperty>
					<setProperty name="name">
						<propertyValue>
							Invitation form
                                                        </propertyValue>
					</setProperty>
					<setProperty name="description">
						<propertyValue>
							Please fill in the form. It would be nice if
							somebody
							can bring a cake and a barbecue. I'm looking forward
							to
							meet you.
                                                        </propertyValue>
					</setProperty>
					<setProperty name="userNotification">
						<propertyValue>
							yes
                                                        </propertyValue>
					</setProperty>
					<getProperty variable="ID4" name="taskResult" />
				</invokeNode>
			</nodes>
		</forEachNode>
		<endNode id="5">
			<graphics height="20" width="30" y="0" x="0" />
			<targets>
				<target arcId="123456791" />
			</targets>
			<notificationOfSuccess>
				<setProperty variable="ID3" name="successMessage" />
				<setProperty variable="ID9" name="to" />
			</notificationOfSuccess>
		</endNode>
	</nodes>
	<arcs>
		<arc targetNode="2" sourceNode="1" id="123456789" />
		<arc targetNode="3" sourceNode="2" id="123456790" />
		<arc targetNode="5" sourceNode="3" id="123456791" />
	</arcs>
</workflow>