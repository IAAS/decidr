<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 04.05.2009 13:48:06 by Hibernate Tools 3.2.2.GA -->
<hibernate-mapping>
    <class name="de.decidr.model.entities.User" table="user" catalog="decidrdb">
        <id name="id" type="java.lang.Long">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="authKey" type="string">
            <column name="authKey" length="64">
                <comment>Used to authenticate unregistered users within the system.Should be set to null if the user is registered.</comment>
            </column>
        </property>
        <property name="email" type="string">
            <column name="email" unique="true">
                <comment>Can be used to log into the system. Each email address can be assigned to at most one user. The official max email address length is 320 characters, but
                MySQL unique indices require VARCHAR.</comment>
            </column>
        </property>
        <property name="disabledSince" type="timestamp">
            <column name="disabledSince" length="19">
                <comment>By setting disabledSince to something other than null, the super admin can ban a user from using the system.</comment>
            </column>
        </property>
        <property name="unavailableSince" type="timestamp">
            <column name="unavailableSince" length="19">
                <comment>Whether or not the user is available for workflow participation. Null indicates that the user is available.</comment>
            </column>
        </property>
        <property name="registeredSince" type="timestamp">
            <column name="registeredSince" length="19">
                <comment>If this field is null the user has never successfully registered.</comment>
            </column>
        </property>
        <set name="workItems" inverse="true">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.WorkItem" />
        </set>
        <set name="invitationsForSenderId" inverse="true">
            <key>
                <column name="senderId" not-null="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.Invitation" />
        </set>
        <set name="workflowModels" inverse="true">
            <key>
                <column name="modifiedByUserId" />
            </key>
            <one-to-many class="de.decidr.model.entities.WorkflowModel" />
        </set>
        <set name="userIsMemberOfTenant" inverse="false" table="user_is_member_of_tenant">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <many-to-many entity-name="de.decidr.model.entities.Tenant">
                <column name="tenantId" not-null="true" />
            </many-to-many>
        </set>
        <set name="userProfiles" inverse="true">
            <key>
                <column name="userId" not-null="true" unique="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.UserProfile" />
        </set>
        <set name="registrationRequests" inverse="true">
            <key>
                <column name="userId" not-null="true" unique="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.RegistrationRequest" />
        </set>
        <set name="invitationsForReceiverId" inverse="true">
            <key>
                <column name="receiverId" not-null="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.Invitation" />
        </set>
        <set name="userAdministratesWorkflowInstance" inverse="false" table="user_administrates_workflow_instance">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <many-to-many entity-name="de.decidr.model.entities.WorkflowInstance">
                <column name="workflowInstanceId" not-null="true" />
            </many-to-many>
        </set>
        <set name="systemSettingses" inverse="true">
            <key>
                <column name="superAdminId" />
            </key>
            <one-to-many class="de.decidr.model.entities.SystemSettings" />
        </set>
        <set name="userHasFileAccesses" inverse="true">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.UserHasFileAccess" />
        </set>
        <set name="userParticipatesInWorkflow" inverse="false" table="user_participates_in_workflow">
            <key>
                <column name="userId" not-null="true" />
            </key>
            <many-to-many entity-name="de.decidr.model.entities.WorkflowInstance">
                <column name="workflowInstanceId" not-null="true" />
            </many-to-many>
        </set>
        <set name="administratedTenants" inverse="true">
            <key>
                <column name="adminId" not-null="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.Tenant" />
        </set>
        <set name="changeEmailRequests" inverse="true">
            <key>
                <column name="userId" not-null="true" unique="true" />
            </key>
            <one-to-many class="de.decidr.model.entities.ChangeEmailRequest" />
        </set>
        <set name="userAdministratesWorkflowModel" inverse="false" table="user_administrates_workflow_model">
            <key>
                <column name="userId" not-null="true">
                    <comment>The tenant admin always implicitly administrates all workflow models.</comment>
                </column>
            </key>
            <many-to-many entity-name="de.decidr.model.entities.WorkflowModel">
                <column name="workflowModelId" not-null="true" />
            </many-to-many>
        </set>
    </class>
</hibernate-mapping>
