<!-- Sample Synapse configuration that creates a virtual endpoint with enabled
     security, even though the virtalized endpoint does not support WSS -->
<definitions xmlns="http://ws.apache.org/ns/synapse">    
    <!-- Defines the security policy used for the virtual endpoint -->
    <localEntry key="sec_policy" src="file:repository/policies/my_policy.xml"/>

    <!-- Virtual endpoint with enabled security -->
    <proxy name="SecuredServiceProxy" transports="http">
        <target>
            <endpoint>
                <address uri="https://localhost:9000/soap/UnsecuredService"/>
            </endpoint>
            <outSequence>
                <send/>
            </outSequence>
        </target>

        <publishWSDL uri="http://localhost:9000/soap/SecuredService?wsdl"/>
        <!-- The security policy to use for the virtual endpoint -->
        <policy key="sec_policy" type="in out"/>    
        <!-- Enables WS-Security for the virtual endpoint -->
        <enableSec/>
    </proxy>
    
    <sequence name="main">
        <drop/>
    </sequence>
</definitions>